// Bed.js
import { SceneObject } from './SceneObject.js';

export class Bed extends SceneObject {
    constructor(gl) {
        super();
        this.gl = gl;
        this.initBed();
    }

    initBed() {
        this.bedVertices = new Float32Array([
            // Bed Frame (dark brown)
            // Front face
            -1.0, 0.0, -2.0, 0.45, 0.29, 0.07,
             1.0, 0.0, -2.0, 0.45, 0.29, 0.07,
             1.0, 0.2, -2.0, 0.45, 0.29, 0.07,
            -1.0, 0.0, -2.0, 0.45, 0.29, 0.07,
             1.0, 0.2, -2.0, 0.45, 0.29, 0.07,
            -1.0, 0.2, -2.0, 0.45, 0.29, 0.07,

            // Back face
            -1.0, 0.0, 2.0, 0.45, 0.29, 0.07,
             1.0, 0.0, 2.0, 0.45, 0.29, 0.07,
             1.0, 0.2, 2.0, 0.45, 0.29, 0.07,
            -1.0, 0.0, 2.0, 0.45, 0.29, 0.07,
             1.0, 0.2, 2.0, 0.45, 0.29, 0.07,
            -1.0, 0.2, 2.0, 0.45, 0.29, 0.07,

            // Left face
            -1.0, 0.0, -2.0, 0.4, 0.2, 0.1,
            -1.0, 0.0,  2.0, 0.4, 0.2, 0.1,
            -1.0, 0.2,  2.0, 0.4, 0.2, 0.1,
            -1.0, 0.0, -2.0, 0.4, 0.2, 0.1,
            -1.0, 0.2,  2.0, 0.4, 0.2, 0.1,
            -1.0, 0.2, -2.0, 0.4, 0.2, 0.1,

            // Right face
             1.0, 0.0, -2.0, 0.4, 0.2, 0.1,
             1.0, 0.0,  2.0, 0.4, 0.2, 0.1,
             1.0, 0.2,  2.0, 0.4, 0.2, 0.1,
             1.0, 0.0, -2.0, 0.4, 0.2, 0.1,
             1.0, 0.2,  2.0, 0.4, 0.2, 0.1,
             1.0, 0.2, -2.0, 0.4, 0.2, 0.1,

            // Top face
            -1.0, 0.2, -2.0, 0.5, 0.3, 0.1,
             1.0, 0.2, -2.0, 0.5, 0.3, 0.1,
             1.0, 0.2,  2.0, 0.5, 0.3, 0.1,
            -1.0, 0.2, -2.0, 0.5, 0.3, 0.1,
             1.0, 0.2,  2.0, 0.5, 0.3, 0.1,
            -1.0, 0.2,  2.0, 0.5, 0.3, 0.1,

            // Headboard
            -1.0, 0.2, 2.0, 0.35, 0.2, 0.1,
             1.0, 0.2, 2.0, 0.35, 0.2, 0.1,
             1.0, 1.0, 2.0, 0.35, 0.2, 0.1,
            -1.0, 0.2, 2.0, 0.35, 0.2, 0.1,
             1.0, 1.0, 2.0, 0.35, 0.2, 0.1,
            -1.0, 1.0, 2.0, 0.35, 0.2, 0.1,

            // Left Pillow (red, 3D cube)
            // Front face
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.5, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.5, 0.8, 0.0, 0.0,
            -0.4, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Back face
            -0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.1, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.1, 0.8, 0.0, 0.0,
            -0.4, 0.3,  1.1, 0.8, 0.0, 0.0,

            // Left face
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
            -0.4, 0.3,  1.1, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
            -0.4, 0.3,  1.1, 0.8, 0.0, 0.0,
            -0.4, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Right face
             0.0, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.0, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Top face
            -0.4, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3, 1.1, 0.8, 0.0, 0.0,
            -0.4, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.3, 1.1, 0.8, 0.0, 0.0,
            -0.4, 0.3, 1.1, 0.8, 0.0, 0.0,

            // Bottom face
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.1, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.0, 0.21, 1.1, 0.8, 0.0, 0.0,
            -0.4, 0.21, 1.1, 0.8, 0.0, 0.0,

            // Right Pillow (red, 3D cube)
            // Front face
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.5, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.5, 0.8, 0.0, 0.0,
             0.4, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Back face
             0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.4, 0.3,  1.1, 0.8, 0.0, 0.0,

            // Left face
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.4, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.4, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.4, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Right face
             0.8, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.1, 0.8, 0.0, 0.0,
             0.8, 0.3,  1.5, 0.8, 0.0, 0.0,

            // Top face
             0.4, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3, 1.1, 0.8, 0.0, 0.0,
             0.4, 0.3, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.3, 1.1, 0.8, 0.0, 0.0,
             0.4, 0.3, 1.1, 0.8, 0.0, 0.0,

            // Bottom face
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.5, 0.8, 0.0, 0.0,
             0.8, 0.21, 1.1, 0.8, 0.0, 0.0,
             0.4, 0.21, 1.1, 0.8, 0.0, 0.0,

            // Bed Sheet (white)
            -1.0, 0.21, -2.0, 1.0, 1.0, 1.0,
             1.0, 0.21, -2.0, 1.0, 1.0, 1.0,
             1.0, 0.21,  2.0, 1.0, 1.0, 1.0,
            -1.0, 0.21, -2.0, 1.0, 1.0, 1.0,
             1.0, 0.21,  2.0, 1.0, 1.0, 1.0,
            -1.0, 0.21,  2.0, 1.0, 1.0, 1.0,

            // Comforter (red)
            -1.0, 0.22, -2.0, 0.8, 0.0, 0.0,
             1.0, 0.22, -2.0, 0.8, 0.0, 0.0,
             1.0, 0.22,  0.0, 0.8, 0.0, 0.0,
            -1.0, 0.22, -2.0, 0.8, 0.0, 0.0,
             1.0, 0.22,  0.0, 0.8, 0.0, 0.0,
            -1.0, 0.22,  0.0, 0.8, 0.0, 0.0,
        ]);

        this.buffer = this.gl.createBuffer();
        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
        this.gl.bufferData(this.gl.ARRAY_BUFFER, this.bedVertices, this.gl.STATIC_DRAW);
    }

    draw(program, viewMatrix, projectionMatrix) {
        const modelMatrix = this.getModelMatrix();

        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
        const aPosition = this.gl.getAttribLocation(program, 'aPosition');
        const aColor = this.gl.getAttribLocation(program, 'aColor');

        const stride = 6 * Float32Array.BYTES_PER_ELEMENT;
        this.gl.vertexAttribPointer(aPosition, 3, this.gl.FLOAT, false, stride, 0);
        this.gl.enableVertexAttribArray(aPosition);

        this.gl.vertexAttribPointer(aColor, 3, this.gl.FLOAT, false, stride, 3 * Float32Array.BYTES_PER_ELEMENT);
        this.gl.enableVertexAttribArray(aColor);

        const uModelMatrix = this.gl.getUniformLocation(program, 'uModelMatrix');
        const uViewMatrix = this.gl.getUniformLocation(program, 'uViewMatrix');
        const uProjectionMatrix = this.gl.getUniformLocation(program, 'uProjectionMatrix');

        this.gl.uniformMatrix4fv(uModelMatrix, false, modelMatrix);
        this.gl.uniformMatrix4fv(uViewMatrix, false, viewMatrix);
        this.gl.uniformMatrix4fv(uProjectionMatrix, false, projectionMatrix);

        this.gl.drawArrays(this.gl.TRIANGLES, 0, this.bedVertices.length / 6);
    }
}
